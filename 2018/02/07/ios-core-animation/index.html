<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iOS Core Animation · Liang Yu's Website</title><meta name="description" content="iOS Core Animation - Liang Yu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.yuliang.xyz/atom.xml" title="Liang Yu's Website"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">iOS Core Animation</h1><div class="post-info">Feb 7, 2018</div><div class="post-content"><h1 id="Core-Animation"><a href="#Core-Animation" class="headerlink" title="Core Animation"></a><strong>Core Animation</strong></h1><ul>
<li>UIView的block动画就是对Core Animation的封装</li>
<li>Core Animation作用在CALayer上，并非UIView</li>
<li>Core Animation在后台操作，不会阻塞主线程</li>
</ul>
<h3 id="继承结构图"><a href="#继承结构图" class="headerlink" title="继承结构图"></a><strong>继承结构图</strong></h3><img src="/2018/02/07/ios-core-animation/core_animation_hierarchy.png" title="[]">
<h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a><strong>Steps</strong></h3><ol>
<li>创建核心动画对象</li>
<li>设置动画属性</li>
<li>添加到要作用的layer上</li>
</ol>
<h3 id="Common-Properties"><a href="#Common-Properties" class="headerlink" title="Common Properties"></a><strong>Common Properties</strong></h3><ul>
<li>duration: default 0.25s</li>
<li>repeatCount: HUGE_VALUE/CGFLOAT_MAX for infinite loop</li>
<li>repeatDuration: time to repeat</li>
<li>removeOnCompletion: default value is YES. to remove the animation from the layer on completion</li>
<li>fillMode: the behavior of current object in the inactive period</li>
<li>beginTime: animation delay, CACurrentMediaTime() + 2 for 2s delay</li>
<li>CACurrentMediaTime(): current time for the layer</li>
<li>timingFunction: control the pace of animation</li>
<li>delegate: animation delegate</li>
</ul>
<h3 id="AnimationWithKeyPath-Common-keyPath"><a href="#AnimationWithKeyPath-Common-keyPath" class="headerlink" title="AnimationWithKeyPath, Common keyPath"></a>AnimationWithKeyPath, Common keyPath</h3><h3 id="kCAFillMode"><a href="#kCAFillMode" class="headerlink" title="kCAFillMode"></a>kCAFillMode</h3><h3 id="kCAMediaTimingFunction"><a href="#kCAMediaTimingFunction" class="headerlink" title="kCAMediaTimingFunction"></a>kCAMediaTimingFunction</h3><h4 id="基础动画之平移篇"><a href="#基础动画之平移篇" class="headerlink" title="基础动画之平移篇"></a>基础动画之平移篇</h4><ul>
<li>创建CALayer<ul>
<li>实例化一个CALayer对象</li>
<li>设置CALayer的位置，大小和背景颜色</li>
<li>将自定义的CALayer添加到主视图到View上面</li>
</ul>
</li>
<li>创建动画<ul>
<li>实例化一个CABasicAnimation对象</li>
<li>设置动画属性为平移</li>
<li>设置动画起始位置，从哪里到哪里</li>
<li>设置动画的持续时间，填充模式，重复次数和设置代理</li>
</ul>
</li>
<li>将动画添加到CALayer上<ul>
<li>用addAnimation绑定动画到需要作用到的CALayer上面</li>
<li>实现 CAAnimationDelegate的代理方法：<ul>
<li>动画开始时调用的方法</li>
<li>动画结束时调用的方法</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/02/07/mysql-in-nutshell/" class="prev">PREV</a><a href="/2018/02/06/object-oriented-design-101/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://www.yuliang.xyz">Liang Yu</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>